<%- include('../partials/_head.ejs') %>
<%- include('../partials/_header.ejs') %>
<%- include('../partials/_banner.ejs') %>
<%- include('../partials/_navbar.ejs') %>

<style>

  .liste-user-container{
    background-color: cornflowerblue;
  }


  .map-customer{
    width: 790px;
    margin: 0 auto;
    padding: 12px;
    background-color: #fff;

    li{
      background-color: rgb(186, 182, 128);
      padding: 6px;
    }
  }




  li{
    display: flex;
    justify-content: space-between;
    width: 100%;
    height: 50px;
    margin-bottom: 6px;
  }

  .user-name{
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 50%;

    img{
      width: 40px;
      height: 40px;
      border-radius: 12.5%;
      background-color: blueviolet;
    }

    span{
      display: none;
      visibility: hidden;
    }

    h4{
      width: fit-content;
      align-content: center;
      padding-left: 20px;
      flex: 1;
    }
  }

</style>


<% 
  var customers 
  var listLength
%>


<main class="liste-user-container">
    <h2>
      Liste des utilisateurs
    </h2>

    <ul class="map-customer">
      <% for(var i = 0; i < listLength; i++){ %>
        <li>
          <div class="user-name">
            <img src="" alt=<%= customers[i].imgurl %> />
            <span>
              <%= customers[i].id %>
            </span>
            <h4>
              <%= customers[i].name %>
            </h4>
          </div>
          
        </li>
      <% } %>
    </ul>
</main>
<script>
  const allCustomers = document.querySelectorAll(".user-name");

  allCustomers.forEach((element, index) => {
      element.addEventListener('click',(e)=> {
        const getId = element.querySelector('span').innerText;
        const id = getId.trim()


      window.location.href = `http://localhost:8585/customer/${id}`;
    })
}); 

</script>


<%- include('../partials/_footer.ejs') %>

<!-- 
  How to Redirect with JavaScript 
  
    ðŸ‘Œ window.location.href
        â‡² window.location.href = â€˜https://exampleURL.com/â€™;

    ðŸ‘Œ location.assign()
        â‡² window.location.assign(â€˜https://www.exampleURL.com/â€™);

    ðŸ‘Œ location.replace()
        â‡² window.location.replace('https://www.exampleURL.com/');
 -->